{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageError/ImageError.module.css","components/Modal/Modal.module.css","components/Container/Container.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","components/Container/Contaiter.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","image/error.png","components/ImageError/ImageError.js","components/Loader/Loader.js","services/Pixabay-api.js","components/Modal/Modal.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","Container","children","className","s","container","Searchbar","onSearch","useState","imageName","setImageName","onSubmit","e","preventDefault","trim","toast","error","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","name","value","onChange","currentTarget","toLowerCase","autoComplete","autoFocus","placeholder","ImageGalleryItem","src","alt","url","openModal","ImageGalleryItemImage","onClick","ImageError","message","role","errorText","errorImg","imageLoader","color","height","width","timeout","Component","api","fetchImage","query","page","fetch","then","response","ok","json","Promise","reject","Error","modalRoot","document","querySelector","Modal","handleKeyDown","code","props","onClose","handleBackdropClick","target","window","addEventListener","this","removeEventListener","createPortal","Overlay","LoadMoreButton","handleLoadMore","Button","protoTypes","PropTypes","func","isRequired","Status","ImageGallery","images","setImages","setPage","setError","showModal","setShowModal","modalImgProps","setModalImgProps","status","setStatus","useEffect","reset","fetchQuery","pixabayAPI","hits","length","catch","toggleModal","handleImgClick","modalImage","map","id","webformatURL","tags","largeImageURL","setTimeout","scrollTo","top","body","scrollHeight","left","behavior","App","autoClose","theme","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.47ce3a8c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1D8RZ\",\"modalImage\":\"ImageGallery_modalImage__1-Vxi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2KKs0\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__cloj7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"ImageError_error__2vWF-\",\"errorText\":\"ImageError_errorText__12gVm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2X1ri\",\"Modal\":\"Modal_Modal__2nQPE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__1QIII\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3Q7cQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__QTV-x\",\"SearchForm\":\"Searchbar_SearchForm__2tbUo\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1qeee\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__3l7nA\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3Xv8m\"};","import s from './Container.module.css';\n// import PropTypes from 'prop-types';\n\nexport default function Container({ children }) {\n  return <div className={s.container}>{children}</div>;\n}\n\n// Container.propTypes = {\n//   children: PropTypes.node.isRequired,\n// };\n","import React, { useState } from 'react';\nimport s from './Searchbar.module.css';\nimport { toast } from 'react-toastify';\n\nexport default function Searchbar({ onSearch }) {\n  const [imageName, setImageName] = useState('');\n\n  const handleNameChange = e => {\n    setImageName(e.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (imageName.trim() === '') {\n      toast.error('Пустой запрос!');\n      return;\n    }\n\n    onSearch(imageName);\n\n    setImageName('');\n  };\n\n  return (\n    <div>\n      <header className={s.Searchbar}>\n        <form onSubmit={handleSubmit} className={s.SearchForm}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            name=\"imageName\"\n            value={imageName}\n            onChange={handleNameChange}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    </div>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nexport default function ImageGalleryItem({ src, alt, url, openModal }) {\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img\n        src={src}\n        alt={alt}\n        className={s.ImageGalleryItemImage}\n        onClick={() => openModal({ url, alt })}\n      />\n    </li>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  alt: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  openModal: PropTypes.func.isRequired,\n};\n","export default __webpack_public_path__ + \"static/media/error.5185dd2d.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport errorImg from '../../image/error.png';\nimport s from './ImageError.module.css';\n\nexport default function ImageError({ message }) {\n  return (\n    <div className={s.error} role=\"alert\">\n      <p className={s.errorText}>{message}</p>{' '}\n      <img src={errorImg} alt=\"empty\" />\n    </div>\n  );\n}\n\nImageError.propTypes = {\n  message: PropTypes.string.isRequired,\n};\n","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nexport default class imageLoader extends Component {\n  render() {\n    return (\n      <Loader\n        type=\"ThreeDots\"\n        color=\"#3f51b5\"\n        height={80}\n        width={80}\n        timeout={3000}\n      />\n    );\n  }\n}\n","const API_KEY = '22062260-6c25df741ce11e2802dec385a';\nconst BASE_URL = 'https://pixabay.com/api';\n\nfunction fetchImage(query, page) {\n  const url = `${BASE_URL}/?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`;\n\n  return fetch(url).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(\n      new Error(`Изображение с именем ${query} отсутствует`),\n    );\n  });\n}\n\nconst api = {\n  fetchImage,\n};\n\nexport default api;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nexport default function LoadMoreButton({ handleLoadMore }) {\n  return (\n    <button type=\"button\" className={s.Button} onClick={() => handleLoadMore()}>\n      Load more\n    </button>\n  );\n}\n\nLoadMoreButton.protoTypes = {\n  handleLoadMore: PropTypes.func.isRequired,\n};\n","import React, { useState, useEffect } from 'react';\nimport s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem/';\nimport ImageError from '../ImageError';\nimport Loader from '../Loader';\nimport pixabayAPI from '../../services/Pixabay-api';\nimport Modal from '../Modal';\nimport Button from '../Button';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default function ImageGallery({ imageName }) {\n  const [images, setImages] = useState(null);\n  const [page, setPage] = useState(1);\n  const [error, setError] = useState(null);\n  const [showModal, setShowModal] = useState(false);\n  const [modalImgProps, setModalImgProps] = useState({ url: '', alt: '' });\n  const [status, setStatus] = useState(Status.IDLE);\n\n  useEffect(() => {\n    if (!imageName) {\n      return;\n    }\n    reset();\n    setStatus(Status.PENDING);\n    fetchQuery(imageName);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [imageName]);\n\n  const fetchQuery = imageName => {\n    pixabayAPI\n      .fetchImage(imageName, page)\n      .then(({ hits }) => {\n        if (hits.length === 0) {\n          return Promise.reject(\n            new Error(`Изображение с именем - ${imageName} - отсутствует`),\n          );\n        }\n\n        setImages(images => [...images, ...hits]);\n        setPage(page => page + 1);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => {\n        setError(error);\n        setStatus(Status.REJECTED);\n      });\n  };\n\n  const scrollDown = () => {\n    setTimeout(() => {\n      window.scrollTo({\n        top: document.body.scrollHeight,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }, 1000);\n  };\n\n  const handleLoadBtnClick = () => {\n    fetchQuery(imageName);\n    scrollDown();\n  };\n\n  const reset = () => {\n    setPage(1);\n    setImages([]);\n  };\n\n  const toggleModal = () => {\n    setShowModal(showModal => !showModal);\n  };\n\n  const handleImgClick = props => {\n    setModalImgProps(modalImgProps => props);\n    toggleModal();\n  };\n\n  if (status === Status.IDLE) {\n    return <div>Введите название изображения</div>;\n  }\n\n  if (status === Status.PENDING) {\n    return <Loader />;\n  }\n\n  if (status === Status.REJECTED) {\n    return <ImageError message={error.message} />;\n  }\n\n  if (status === Status.RESOLVED) {\n    return (\n      <div>\n        {showModal && (\n          <Modal onClose={toggleModal}>\n            <img\n              src={modalImgProps.url}\n              alt={modalImgProps.alt}\n              className={s.modalImage}\n            />\n          </Modal>\n        )}\n        <ul className={s.ImageGallery}>\n          {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n            <ImageGalleryItem\n              key={id}\n              src={webformatURL}\n              url={largeImageURL}\n              alt={tags}\n              openModal={handleImgClick}\n            />\n          ))}\n        </ul>\n        <Button handleLoadMore={handleLoadBtnClick} />\n      </div>\n    );\n  }\n}\n","import React, { useState } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Container from './components/Container';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\n\nexport default function App() {\n  const [imageName, setImageName] = useState('');\n\n  return (\n    <Container>\n      <Searchbar onSearch={setImageName} />\n      <ImageGallery imageName={imageName} />\n      <ToastContainer autoClose={3000} theme=\"colored\" />\n    </Container>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}